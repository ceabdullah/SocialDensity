@{
    ViewBag.Title = "Google";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=visualization&sensor=false"></script>
<script type="text/javascript">
    //41.008430, 28.994327
    var heatmapData;
    var heatmap;
    var map;
    function initialize() {
        //var mapOptions = {
        //    center: { lat: 41.008430, lng: 28.994327 },
        //    zoom: 11
        //};
        //var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        //       heatmapData = [
        ////new google.maps.LatLng(37.782, -122.447),
        ////new google.maps.LatLng(37.782, -122.445),
        ////new google.maps.LatLng(37.782, -122.443),
        ////new google.maps.LatLng(37.782, -122.441),
        ////new google.maps.LatLng(37.782, -122.439),
        ////new google.maps.LatLng(37.782, -122.437),
        ////new google.maps.LatLng(37.782, -122.435),
        ////new google.maps.LatLng(37.785, -122.447),
        ////new google.maps.LatLng(37.785, -122.445),
        ////new google.maps.LatLng(37.785, -122.443),
        ////new google.maps.LatLng(37.785, -122.441),
        ////new google.maps.LatLng(37.785, -122.439),
        ////new google.maps.LatLng(37.785, -122.437),
        ////new google.maps.LatLng(37.785, -122.435)
        //       ];

        heatmapData = new google.maps.MVCArray();

        var sanFrancisco = new google.maps.LatLng(41.008430, 28.994327);

        map = new google.maps.Map(document.getElementById('map-canvas'), {
            center: sanFrancisco,
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        });

        heatmap = new google.maps.visualization.HeatmapLayer({
            data: heatmapData
        });
        heatmap.setMap(map);
    }
    $(function () {
        $("#map-canvas").width($(document).width());
        $("#map-canvas").height($(document).height());
        initialize();
        getCellsByCoordinate("41.308531", "28.604999", "40.788628", "29.461932");
    });
    function getCellsByCoordinate(minLat, minLon, maxLat, maxLon) {
        //$.ajax({
        //    type: "POST",
        //    dataType: "json",
        //    contentType: "application/json; charset=utf-8",
        //    url: "/CellularData/GetCellsByCoordinate",
        //    data:
        //        '{'
        //        + '"minLat' + '":"' + minLat + '",'
        //        + '"minLon' + '":"' + minLon + '",'
        //        + '"maxLat' + '":"' + maxLat + '",'
        //        + '"maxLon' + '":"' + maxLon
        //        + '"}',
        //    success: function (data) {
        //        debugger;
        //    },
        //    error: function (error) {
        //        debugger;
        //    }
        //});
        $.ajax({
            type: "GET",
            //dataType: "json",
            //contentType: "application/json; charset=utf-8",
            url: "http://opencellid.org/" + "cell/getInArea" + "?" + "key=" + "acbf74e6-3bfc-4eb7-a753-da6418050a47" + "&BBOX=" + minLat + "," + minLon + "," + maxLat + "," + maxLon + "&format=json&limit=2000",
            //data:
            //    '{'
            //    + '"minLat' + '":"' + minLat + '",'
            //    + '"minLon' + '":"' + minLon + '",'
            //    + '"maxLat' + '":"' + maxLat + '",'
            //    + '"maxLon' + '":"' + maxLon
            //    + '"}',
            success: function (data) {
                //data = $.grep(data.cells, function (a) {
                //    return a.averageSignalStrength != 0;
                //});
                data = data.cells;
                $.each(data, function (index) {
                    var cCell = $(this);
                    heatmapData.push(new google.maps.LatLng(cCell[0].lat, cCell[0].lon));
                });
                //$.each(data, function (index) {
                //    var cCell = $(this);
                //    setTimeout(function () {
                //        $.ajax({
                //            type: "GET",
                //            url: "http://opencellid.org/" + "cell/getMeasures" + "?" + "key=" + "acbf74e6-3bfc-4eb7-a753-da6418050a47" + "&cellid=" + cCell[0].cellid + "&mcc=" + cCell[0].mcc + "&mnc=" + cCell[0].mnc + "&lac=" + cCell[0].lac + "&format=json",
                //            success: function (data) {
                //                cCell[0].measurements = $.grep(data.measurements, function (a) { return a.signal != 0; });
                //                heatmapData.push(new google.maps.LatLng(cCell[0].lat, cCell[0].lon));

                //                debugger;
                //            },
                //            error: function (error) {
                //                debugger;
                //            }
                //        });
                //    }, 300);
                //});
                debugger;
            },
            error: function (error) {
                debugger;
            }
        });
        //
    }
</script>
<div id="map-canvas"></div>